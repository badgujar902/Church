@model Church.Models.MAS_LEADER

@{
    ViewBag.Title = "AddLeader";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<script src="~/scripts/jquery-1.10.2.js"></script>
<script src="~/scripts/jquery-1.10.2.min.js"></script>
<script src="~/scripts/jquery.validate.js"></script>
<script src="~/scripts/jquery.validate.min.js"></script>
<script src="~/assets/plugins/sweetalert/dist/sweetalert.min.js"></script>
@*<script src="~/assets/plugins/parsleyjs/dist/parsley.min.js"></script>*@

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
    .important {
    color: red;
    margin-left: 5px; /* Optional: Add some space between the label text and the asterisk */
}
  .fillError{
        color:red;
    }
</style>
    
    <div id="content" class="content">
        @*<ol class="breadcrumb float-xl-right">
                @*<li class="breadcrumb-item"><a href="#" onclick="location.href='@Url.Action("Login","Home",new { area = "" })'">Login</a></li>*
                <li class="breadcrumb-item">
                    <a href="#" onclick="location.href='@Url.Action("Login", "Home", new { area = "" })'">
                        <i class="fa fa-sign-in-alt"></i> Login
                    </a>
                </li>

            </ol>*@
        <!-- begin page-header -->
        @*<h1 class="page-header"></h1>*@
        <!-- end page-header -->
        <!-- begin panel -->
        <div id="list">
            <p class="m-b-10" style="padding-left:10px;">
                <a href="#" onclick="location.href='@Url.Action("LeaderCreateList", "LeaderCreateList",new {area="Admin" })'" class="btn btn-primary btn-sm"><i class="fas fa-lg fa-fw m-r-10 fa-list-ul" style="color:white"></i>Leader List</a>
            </p>
        </div>
        <div class="panel panel-inverse">
            <div class="panel-heading">
                <h4 class="panel-title">Create Leader</h4>
            </div>
            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        <form class="form-horizontal" action="/Admin/AddLeader/SaveAddLeader" method="post" id="frmAddLeader" data-parsley-validate="" name="demo-form" enctype="multipart/form-data">
                            <div>
                                <div id="basic">
                                    @Html.HiddenFor(m => m.FID)
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    State Name
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownListFor(m=>m.StateFid, new SelectList(ViewBag.GEtStateName, "Id", "Name"), "--Select--", new { @class = "form-control default-select2", id = "MasStateId", @required = "required" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    City Name
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownListFor(m=>m.CityName, new SelectList(""), "--Select--", new { @class = "form-control default-select2", id = "MasCity", @required = "required" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Area 
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownListFor(m=>m.ChurchArea, new SelectList(""), "--Select--", new { @class = "form-control default-select2", id = "MasArea", @required = "required" })
                                                    <span class="fillError" id="Area1"></span>
                                                 </div>
                                            </div>
                                        </div>
                                        @*<div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Post Code
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownListFor(m=>m.PostCode, new SelectList(""), "--Select--", new { @class = "form-control default-select2", id = "MasPostCode", @required = "required" })
                                                </div>
                                            </div>
                                        </div>*@
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Church Name
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownListFor(m => m.MAS_CHC_FID, new SelectList(""), "--Select--", new { @class = "form-control default-select2", id = "MAS_CHC_FID", @required = "required" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        @*<div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Church Name
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownListFor(m => m.MAS_CHC_FID, new SelectList(""), "--Select--", new { @class = "form-control default-select2", id = "MAS_CHC_FID", @required = "required" })
                                                </div>
                                            </div>
                                        </div>*@
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Position
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownList("Postion", new List<SelectListItem>
                                                      {
                                                          new SelectListItem { Text="Head Pastor",Value="Head Pastor" },
                                                          new SelectListItem { Text="Co-Worker",Value="Co-Worker" },
                                                            

                                                      }, "--Select--", new { @class = "form-control", name = "Type", id = "dllPostion" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Full Name
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.TextBoxFor(m => m.Lead_Name, new { @class = "form-control", id = "IND_Name", placeholder = "Enter Full Name", @required = "required", @autocomplete = "off" })
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Contact No
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.TextBoxFor(m => m.Lead_Mob, new { @class = "form-control", id = "IND_Mob", maxlength = "10", pattern = @"\d{10}", placeholder = "999-999-9999", @required = "required", @autocomplete = "off" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Email Id
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.TextBoxFor(m => m.Lead_EmailID, new { @class = "form-control", id = "IND_Email", type = "email", placeholder = "Enter Email Id", @required = "required", @autocomplete = "off" })
                                                    <span class="fillError" id="Email"></span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Date Of Birth
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.TextBoxFor(m => m.Lead_DOB, new { @class = "form-control", id = "IND_DOB", type = "date", @required = "required", @autocomplete = "off" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Gender
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.DropDownListFor(m => m.Gender, new List<SelectListItem>
                                                      {
                                                          new SelectListItem { Text="Male",Value="Male" },
                                                          new SelectListItem { Text="Female",Value="Female" },
                                                             new SelectListItem { Text="Other",Value="Other" },

                                                      }, "--Select--", new { @class = "form-control", name = "Type", id = "dllGender" })
                                                </div>
                                            </div>
                                        </div>
                                        
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Upload Image
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    <input type="file" name="file" data-max-size="32154" accept=".png,.jpeg, .jpg" id="file" value="" class="form-control" required />
                                                    <span class="fillError" id="fillerro"></span>
                                                </div>
                                            </div>
                                        </div>
                                        @*<div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Address
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.TextAreaFor(m => m.Lead_Add, new { @class = "form-control", id = "IND_Address", placeholder = "Enter Address", @required = "required", @autocomplete = "off" })

                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Upload Image
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    <input type="file" name="file" data-max-size="32154" accept=".png,.jpeg, .jpg" id="file" value="" class="form-control" required />
                                                    <span class="fillError" id="fillerro"></span>
                                                </div>
                                            </div>
                                        </div>*@
                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    User Id
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">                                                   
                                                    @Html.TextBox("UserName","", new { @class = "form-control", id = "UserName", @placeholder = "Enter User Name",  @readonly = "readonly", autocomplete = "off" })
                                                    @*@Html.TextBoxFor(m => m.AdharNo, new { @class = "form-control", id = "AdharNo", type = "number", placeholder = "Enter Adhar No", @required = "required" })*@
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="row mb-15px" style="margin-bottom:15px;">
                                                <label class="form-label col-form-label col-md-4">
                                                    Password
                                                    <span class="important">*</span>
                                                </label>
                                                <div class="col-md-8">
                                                    @Html.TextBox("Password", "",new { @class = "form-control", id = "U_Pass", type = "password", @placeholder = "Enter Password", @Value = "EKS@1921@", @required = "required", @readonly = "readonly", autocomplete = "off" })
                                                    <button type="button" id="ShowPassword" class="btn btn-default btnpress" style="position:absolute; top:0; right:0; height:100%; color:blue; background-color:lightgray; border:1px solid lightslategray;">
                                                        <i class="fa fa-eye" style="font-size:small; font-weight: bold; color:blue;"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr />
                                    <div class="text-center">
                                        @*<button type="button" id="btnSave" class="btn btn-sm btn-primary m-r-5"><i class="fas fa-lg fa-fw m-r-10 fa-save" style="color:white"></i>Register</button>*@
                                        <button type="button" id="btnSave" class="btn btn-sm btn-primary m-r-5 btn-custom-height">Create</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- end panel -->
    </div>  


<script>
    $(document).ready(function () {

        debugger;
        $("#MasStateId").select2();
        $("#MasCity").select2();
        $("#MAS_CHC_FID").select2();
        $("#dllGender").select2();
        $("#MasArea").select2();
        $("#MasPostCode").select2();
        $("#dllPostion").select2();



        var Message=@(Html.Raw(Json.Encode(TempData["Message"])));
        var Icon=@(Html.Raw(Json.Encode(TempData["Icon"])));
        if (Message!=null) {
            if(Icon!=null)
            {
                Swal.fire({
                    title: '',
                    text: Message,
                    icon: Icon,
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Ok'
                });
            }

        }



        $("#MasStateId").on("change", function () {
            debugger;
            $("#MasCity").find("option").remove();
            var StateId = $("#MasStateId").val();
            $.ajax({
                type: 'GET',
                dataType: 'JSON',
                contentType: "application/json; charset=utf-8",
                url: '@Url.Action("GetCity", "AddLeader")',
                data: { StateId: StateId },
                success: function (data) {
                    debugger;
                    if (data != null) {
                        //var data1 = data.data;
                        $("#MasCity").append("<option value=''>--Select-- </option>");
                        $.each(data, function (i, p) {
                            $("#MasCity").append("<option value='" + p.Name + "'>" + p.Name + "</option>");
                        });
                    }
                    else {
                        $('#ErrorESSPassword').html(" ");
                    }
                }
            })

        });


        @*$("#MasPostCode").on("change", function () {
            debugger;
            $("#MAS_CHC_FID").find("option").remove();
            var MasCityName = $("#MasCity").val();
            var StateId = $("#MasStateId").val();
            var CityArea = $("#MasArea").val();
            var PostCode = $("#MasPostCode").val();
            $.ajax({
                type: 'GET',
                dataType: 'JSON',
                contentType: "application/json; charset=utf-8",
                url: '@Url.Action("GetChurchName", "AddLeader")',
                data: {StateId:StateId, MasCityName: MasCityName ,CityArea:CityArea,PostCode:PostCode},
                success: function (data) {
                    debugger;
                    if (data != null) {
                        //var data1 = data.data;
                        $("#MAS_CHC_FID").append("<option value=''>--Select--</option>");
                        $.each(data, function (i, p) {
                            $("#MAS_CHC_FID").append("<option value='" + p.Id + "'>" + p.Name + "</option>");
                        });
                    }
                    else {
                        $('#ErrorESSPassword').html(" ");
                    }
                }
            })

        });*@


        $("#MasCity").on("change", function () {
            debugger;
            $("#MasArea").find("option").remove();
            var MasCityName = $("#MasCity").val();
            var StateId = $("#MasStateId").val();
            $.ajax({
                type: 'GET',
                dataType: 'JSON',
                contentType: "application/json; charset=utf-8",
                url: '@Url.Action("GetArea", "AddLeader")',
                data: {StateId:StateId, MasCityName: MasCityName },
                success: function (data) {
                    debugger;
                    if (data != null) {
                        var GetArea  = data.Data;
                        var GetChurch=data.GetChurch;
                        if(GetArea!=null)
                        {
                            $("#MasArea").append("<option value=''>--Select--</option>");
                            $.each(GetArea, function (i, p) {
                                $("#MasArea").append("<option value='" + p.Name + "'>" + p.Name + "</option>");
                            });
                        }
                        if(GetChurch!=null)
                        {
                            //$("#MAS_CHC_FID").append("<option value=''>--Select--</option>");
                            $.each(GetChurch, function (i, p) {
                                $("#MAS_CHC_FID").append("<option value='" + p.Id + "'>" + p.Name + "</option>");
                            });
                        }
                   
                    }
                    else {
                        $('#ErrorESSPassword').html(" ");
                    }
                }
            })

        });

        @*$("#MasArea").on("change", function () {
            debugger;
            $("#MasPostCode").find("option").remove();
            var CityArea = $("#MasArea").val();
            var StateId = $("#MasStateId").val();
            var MasCityName = $("#MasCity").val();
            $.ajax({
                type: 'GET',
                dataType: 'JSON',
                contentType: "application/json; charset=utf-8",
                url: '@Url.Action("GetChurchName", "AddLeader")',
                data: {StateId:StateId, CityArea: CityArea,MasCityName:MasCityName },
                success: function (data) {
                    debugger;
                    if (data != null) {
                        //var data1 = data.data;
                        //$("#MAS_CHC_FID").append("<option value=''>--Select--</option>");
                        $.each(data, function (i, p) {
                            $("#MAS_CHC_FID").append("<option value='" + p.Id + "'>" + p.Name + "</option>");
                        });
                    }
                    else {
                        $('#ErrorESSPassword').html(" ");
                    }
                }
            })

        });*@



        $('#IND_Mob').on('input', function (e) {
            debugger;
            var input = $(this).val();
            if (e.which == 32) {

                Swal.fire({
                    title: '',
                    text: "Space not Allowed",
                    icon: "error",
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Ok'
                });
                return false;
            }
            if (e.which != 8 && e.which != 0 && (e.which < 48 || e.which > 57))
            {
                //swal("", "Enter Only Digits", "error");
                Swal.fire({
                    title: '',
                    text:"Enter Only Digits",
                    icon: "error",
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Ok'
                });
                return false;
            }
            if (!/^\d*$/.test(input)) {
                Swal.fire({
                    title: '',
                    text: "Enter Only Digits",
                    icon: "error",
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Ok'
                });

                $(this).val(input.replace(/\D/g, '')); // Remove non-digit characters from input
                return false;
            }
            $("#UserName").val(input);

        });

        $('#IND_Mob').on('keydown', function (e) {
            if (e.which == 8) { // Backspace key
                $("#UserName").val('');
            }
        })

        $('#IND_Email').on('keypress', function (e) {
            if (e.which == 32) {
                Swal.fire({
                    title: '',
                    text: "Space not Allowed",
                    icon: "error",
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Ok'
                });
                return false;
            }

        });


        $("#Area").change(function(){
            $("#Area1").html("");
        });

        $("#btnSave").click(function(){
            debugger;
            var MobileNumber=$("#IND_Mob").val();
            var Email=$("#IND_Email").val();
            var Area=$("#MasArea").val();
            var Position=$("#dllPostion").val();
            var form = $('#frmAddLeader');

            //e.preventDefault();

            $.ajax({
                url: '@Url.Action("IsExistsData", "AddLeader")',
                method:"POST",
                dataType: 'json',
                contentType: 'application/x-www-form-urlencoded; charset=utf-8',              
                data:{
                    Email: Email,
                    MobileNumber: MobileNumber,
                    Area: Area,
                    Position: Position
                },
                success:function(response){
                    debugger;
                    var Message1 = response.Message;
                    var Icon1 = response.Icon;
                    var Area=response.Area;
                    if (response.Icon=="error") {
                        if (Message1 != null) {
                            if (Message1 != null) {
                                if(Message1=="Email Already Exist")
                                {
                                    $(".Userloaderbg").css("display", "none");
                                    $("#Email").html(Message1);
                                    $("#IND_Email").css("border", "1px solid red");

                                    return false;
                                }else if(Message1=="Area Already Assigned to Leader")
                                {
                                    $(".Userloaderbg").css("display", "none");
                                    $("#Area1").html(Area+' Area already Assigned');
                                    $("#MasArea").css("border", "1px solid red");
                                    return false;
                                }
                                else{
                                    $(".Userloaderbg").css("display", "none");
                                    Swal.fire({
                                        title: '',
                                        text: Message1,
                                        icon: Icon1,
                                        confirmButtonColor: '#3085d6',
                                        confirmButtonText: 'Ok'
                                    });
                                }

                            }
                        }
                    }
                    else{
                        if (form[0].checkValidity()) {
                            $(".Userloaderbg").css("display", "flex");

                        }
                            $("#frmAddLeader").submit();


                    }
                }
            });

        });


    });//Ready
</script>

<script>
    $('#ShowPassword').click(function() {
        debugger;
        var passwordInput = $('#U_Pass');
        var buttonIcon = $('#ShowPassword i');

        // Toggle password visibility
        if (passwordInput.attr('type') === 'password') {
            passwordInput.attr('type', 'text');
            buttonIcon.removeClass('fa-eye').addClass('fa-eye-slash'); // Change icon to 'eye-slash' icon
        } else {
            passwordInput.attr('type', 'password');
            buttonIcon.removeClass('fa-eye-slash').addClass('fa-eye'); // Change icon back to 'eye' icon
        }
    });
</script>

