@model Church.Models.MAS_UID
@{
    Layout = null;
}

<!DOCTYPE html>
<style>
    .pace {
        display: none;
    }

    .login.login-with-news-feed .right-content {
        background: none;
    }

     .form-group {
            position: relative;
            display: flex;
            align-items: center;
        }
        .form-control {
            flex: 1;
            padding-right: 40px; /* Space for the button */
            margin: 0;
        }
        .btnpress {
            position: absolute;
            right: 1px; /* Position the button */
            height: calc(100% - 2px); /* Adjust height to fit input field */
            border: none;
            background-color: lightgray;
            color: blue;
            cursor: pointer;
            z-index: 2;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .btnpress i {
            font-size: large;
            font-weight: bold;
        }
        .forgotError{
            color:red;
        }
        .important{
            color:red;
        }
  
</style>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title> Login Page</title>
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
    <meta content="" name="description" />
    <meta content="" name="author" />
    <link href="~/assets/css/apple/app.min.css" rel="stylesheet" />
    <link href="~/assets/plugins/ionicons/css/ionicons.min.css" rel="stylesheet" />
    <link href="~/sweetalert.css" rel="stylesheet" />
    <link href="~/assets/plugins/select2/dist/css/select2.min.css" rel="stylesheet" />
</head>

<body class='pace-top'>   
   
    <!-- BEGIN #app -->
    <div id="app" class="app">
        <!-- BEGIN login -->
        <div class="login login-v2">
            <!-- BEGIN login-cover -->
            @*<div class="login-cover">
                <div class="login-cover-img" style="background-image: url('../../images/Untitled design (1) (1).jpg');background-size: cover; background-position: center top; height:100%; z-index:0; position:relative;" data-id="login-cover-image"></div>
                <div class="login-cover-bg" style="background: linear-gradient(to bottom, rgba(0, 0, 0, .45) 0, rgba(0, 0, 0, .4));"></div>
            </div>*@
         
           
            @*<div class="login-cover">
                <div class="login-cover-img" style="background-image: url('@Url.Content("~/Content/Images/Login.jpeg")');background-size: cover; background-position: center top; height:100vh; z-index:0; position:relative;" data-id="login-cover-image"></div>
                <div class="login-cover-bg" style="background: linear-gradient(to bottom, rgba(0, 0, 0, .45) 0, rgba(0, 0, 0, .4));"></div>
            </div>*@
            <div class="login-cover">
                <img src="~/Content/Images/CharchLoginBG.jpg" class="login-cover-img" alt="Login Image" style="object-fit: cover; width: 100%; height: 100vh; position: absolute; top: 0; left: 0; z-index: 0;">
                <div class="login-cover-bg" style="background: linear-gradient(to bottom, rgba(0, 0, 0, .45) 0, rgba(0, 0, 0, .4)); position: absolute; top: 0; left: 0; width: 100%; height: 100vh; z-index: 1;"></div>
            </div>

            <!-- END login-cover -->
            <!-- BEGIN login-container -->
            <div class="login-container" id="LoginContainer" style="position:relative;">
                <!-- BEGIN login-header -->
                <div class="login-header">
                    <div class="brand">
                        <div class="d-flex align-items-center justify-content-center">
                            @*<span class="logo"></span>*@ <b> Login</b>
                        </div>
                    </div>

                </div>
                <!-- END login-header -->
                <!-- BEGIN login-body -->
                <div class="login-body">
                    <!-- BEGIN login-content -->
                    <div class="login-content fs-13px">
                        <form action="/Home/Login" method="post" class="margin-bottom-0">
                            @Html.HiddenFor(X => X.FID)
                            <input hidden name="ApllicationType" value="IsWeb"/>
                            <div class="form-group m-b-15">
                                <input type="text" name="UserName" placeholder="User Name" autocomplete="off" class="form-control form-control-lg" required />
                            </div>
                            @*<div class="form-group m-b-15">
                                <input type="password" class="form-control form-control-lg" name="Password" placeholder="Password" autocomplete="off" required />

                                <button type="button" id="ShowPassword" class="btn btn-default btnpress" style="position:absolute;top:0;right:0;height:100%; color:blue;background-color:lightgray;border:1px solid lightslategray;">
                                    <i class="fa fa-eye" style="font-size:large;font-weight: bold;color:blue;"></i>
                                </button>
                            </div>*@
                            <div class="form-group m-b-15">
                                <input type="password" class="form-control form-control-lg" name="Password" placeholder="Password" autocomplete="off" required id="passwordInput" />
                                <button type="button" id="ShowPassword" class="btn btn-default btnpress">
                                    <i class="fa fa-eye"></i>
                                </button>
                            </div>
                            <div class="login-buttons">
                                <button type="submit" class="btn btn-primary btn-block btn-lg">Login</button> 
                                               
                                <a href="#" style="" onclick="location.href='@Url.Action("RegistrationForm", "Home")'" class="btn btn-primary btn-block btn-lg">New Registration</a>
                            </div>
                            <div class="mb-15px" style="margin-top:20px;">
                                <span id="ForgotPassword" style="color:white; margin-left: 137px ;cursor: pointer;"> Forgot Password</span>
                            </div>
                            @*<div style="margin-top:10px;">
                                -----------------------------<a href="" style="align-content:center;">forgot password</a>-------------------------     
                            </div>*@
                            <hr/>
                            <p class="text-center text-white-transparent-5 mb-0">
                                @*&copy; Color Admin All Right Reserved 2021*@
                            </p>
                        </form>
                    </div>
                    <!-- END login-content -->
                </div>
                <!-- END login-body -->
            </div>
            <!-- END login-container -->
        </div>       
    </div>


    @*//Popup model start*@
    <div class="modal fade" id="ForgotModel" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Forgot</h5>
                    <button type="button" class="close" data-dismiss="modal" id="btnclose" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form action="/Home/ForgotPassword" id="frmForgotPassword" method="post" data-parsley-validate="true" enctype="multipart/form-data">
                        <div id="ForgotmodelFirst">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row mb-15px" style="margin-bottom:15px;">
                                        <label class="form-label col-form-label col-md-4">
                                            Email address
                                            <span class="important">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="email" class="form-control" id="email" placeholder="Enter email" autocomplete="off">
                                            <span class="forgotError" id="EmailError"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row mb-15px" style="margin-bottom:15px;">
                                        <label class="form-label col-form-label col-md-4">
                                            User ID
                                            <span class="important">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="userid" placeholder="Enter user ID" autocomplete="off">
                                            <span class="forgotError" id="UserIdError"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*<div class="row">
                                <div class="col-md-12">
                                    <div class="row mb-15px" style="margin-bottom:15px;">
                                        <label class="form-label col-form-label col-md-4">
                                            Password
                                            <span class="important">*</span>
                                        </label>                                      
                                        <div class="col-md-8">
                                            <div class="input-group">
                                                <input type="password" class="form-control form-control-lg" name="Password" placeholder="Enter password" autocomplete="off" required id="OldPassword" />
                                                <div class="input-group-append">
                                                    <button type="button" id="ShowOldPassword" class="btn btn-outline-secondary">
                                                        <i class="fa fa-eye"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <span class="forgotError" id="spnnewPassword"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>*@
                            <div class="modal-footer">
                                <button type="button" id="btnforgot" class="btn btn-primary">Reset</button>
                            </div>
                        </div>                       
                        <div id="NewPassowrdDive">
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row mb-15px" style="margin-bottom:15px;">
                                        <label class="form-label col-form-label col-md-4">
                                            New UserId
                                            <span class="important">*</span>
                                        </label>
                                        <div class="col-md-8">
                                            <input type="text" class="form-control" id="newUserId" placeholder="Enter New UserId">
                                            <span class="forgotError" id="spnnewuserId"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-12">
                                    <div class="row mb-15px" style="margin-bottom:15px;">
                                        <label class="form-label col-form-label col-md-4">
                                            New Password
                                            <span class="important">*</span>
                                        </label>
                                        @*<div class="col-md-8">                                            
                                            <input type="password" class="form-control form-control-lg" name="Password" placeholder="Enter new password" autocomplete="off" required id="newPassword" />
                                            <button type="button" id="ShowNewPassword" class="btn btn-default btnpress">
                                                <i class="fa fa-eye"></i>
                                            </button>
                                            <span class="forgotError" id="spnnewPassword"></span>
                                        </div>*@
                                    <div class="col-md-8">
                                        <div class="input-group">
                                            <input type="password" class="form-control form-control-lg" name="Password" placeholder="Enter new password" autocomplete="off" required id="newPassword" />
                                            <div class="input-group-append">
                                                <button type="button" id="ShowNewPassword" class="btn btn-outline-secondary">
                                                    <i class="fa fa-eye"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <span class="forgotError" id="spnnewPassword"></span>
                                    </div>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" id="btnUpdatePassword" class="btn btn-primary">Update</button>
                            </div>
                        </div>

                    </form>
                </div>               
            </div>
        </div>
    </div>
    @*//Popup model end*@
  
</body>


</html>
<script src="~/assets/plugins/jquery-migrate/dist/jquery-migrate.min.js"></script>
<script src="~/assets/plugins/moment/min/moment.min.js"></script>
<script src="~/assets/plugins/ion-rangeslider/js/ion.rangeSlider.min.js"></script>
<script src="~/assets/plugins/bootstrap-colorpicker/dist/js/bootstrap-colorpicker.min.js"></script>
<script src="~/assets/plugins/jquery.maskedinput/src/jquery.maskedinput.js"></script>
<script src="~/assets/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js"></script>
<script src="~/assets/plugins/bootstrap-select/dist/js/bootstrap-select.min.js"></script>
<script src="~/assets/plugins/tag-it/js/tag-it.min.js"></script>
<script src="~/assets/plugins/bootstrap-daterangepicker/daterangepicker.js"></script>
<script src="~/assets/plugins/select2/dist/js/select2.min.js"></script>
<script src="~/assets/plugins/clipboard/dist/clipboard.min.js"></script>
<script src="~/assets/js/demo/form-plugins.demo.js"></script>
<script src="~/scripts/jquery-1.10.2.min.js"></script>
<script src="~/SweetAlert/sweetalert.js"></script>
<link href="~/SweetAlert/sweetalert.css" rel="stylesheet"/>
<script src="~/SweetAlert/sweetalert.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
    $(document).ready(function () {
        debugger;
        let error = @Html.Raw(Json.Encode(TempData["Error"]));
        let SuccessMsgCandidate = @Html.Raw(Json.Encode(TempData["SuccessMsgCandidate"]));
      var Message=@(Html.Raw(Json.Encode(TempData["Message"])));
        var Icon=@(Html.Raw(Json.Encode(TempData["Icon"])));
        if (Message!=null) {
            if(Icon!=null)
            {
                //swal("",Message,Icon);
                Swal.fire({
                    title: '',
                    text: Message,
                    icon: Icon,
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Ok'
                });
            }

        }
        debugger;
      
        if (error!=null) {
            //swal("",error,"error");
            Swal.fire({
                title: '',
                text: error,
                icon: "error",
                confirmButtonColor: '#3085d6',
                confirmButtonText: 'Ok'
            });
        }
        if (checkUserExist!=null) {
            //swal("",checkUserExist,"error");
            Swal.fire({
                title: '',
                text: checkUserExist,
                icon: "error",
                confirmButtonColor: '#3085d6',
                confirmButtonText: 'Ok'
            });
        }
        if (candidateMsg !=null) {
            swal("",candidateMsg,"info");
            Swal.fire({
                title: '',
                text: candidateMsg,
                icon: "info",
                confirmButtonColor: '#3085d6',
                confirmButtonText: 'Ok'
            });
        }


     
        $('#email').on('keypress', function (e) {
            debugger;
            if (e.which == 32) {
                Swal.fire({
                    title: '',
                    text: "Space not Allowed",
                    icon: "error",
                    confirmButtonColor: '#3085d6',
                    confirmButtonText: 'Ok'
                })
                return false;
            }
        });
        //$("#userid").val("");
        //$("#password").val("");
    });//Ready

</script>
<script>
    $('#ShowPassword').click(function() {
        debugger;
        var passwordInput = $('#passwordInput');
        var buttonIcon = $('#ShowPassword i');

        // Toggle password visibility
        if (passwordInput.attr('type') === 'password') {
            passwordInput.attr('type', 'text');
            buttonIcon.removeClass('fa-eye').addClass('fa-eye-slash'); // Change icon to 'eye-slash' icon
        } else {
            passwordInput.attr('type', 'password');
            buttonIcon.removeClass('fa-eye-slash').addClass('fa-eye'); // Change icon back to 'eye' icon
        }
    });


    $('#ShowNewPassword').click(function() {
        debugger;
        var passwordInput = $('#newPassword');
        var buttonIcon = $('#ShowNewPassword i');

        // Toggle password visibility
        if (passwordInput.attr('type') === 'password') {
            passwordInput.attr('type', 'text');
            buttonIcon.removeClass('fa-eye').addClass('fa-eye-slash'); // Change icon to 'eye-slash' icon
        } else {
            passwordInput.attr('type', 'password');
            buttonIcon.removeClass('fa-eye-slash').addClass('fa-eye'); // Change icon back to 'eye' icon
        }
    });

    $('#ShowOldPassword').click(function() {
        debugger;
        var passwordInput = $('#OldPassword');
        var buttonIcon = $('#ShowOldPassword i');

        // Toggle password visibility
        if (passwordInput.attr('type') === 'password') {
            passwordInput.attr('type', 'text');
            buttonIcon.removeClass('fa-eye').addClass('fa-eye-slash'); // Change icon to 'eye-slash' icon
        } else {
            passwordInput.attr('type', 'password');
            buttonIcon.removeClass('fa-eye-slash').addClass('fa-eye'); // Change icon back to 'eye' icon
        }
    });



    $('#email').on('keypress', function (e) {
        debugger;
        if (e.which == 32) {
            Swal.fire({
                title: '',
                text: "Space not Allowed",
                icon: "error",
                confirmButtonColor: '#3085d6',
                confirmButtonText: 'Ok'
            })

            return false;
        }
    });

        $("#email").click(function () {
        debugger;
        $("#EmailError").html(""); // Clear the error message
        $("#email").css("border", "1px solid green"); // Change border color to green
    });

    $("#userid").on("input", function () {
        debugger;
        $("#UserIdError").html("");
        $("#userid").css("border", "1px solid green");
    });
    $("#password").on("input", function () {
        debugger;
        $("#passwordError").html("");
        $("#password").css("border", "1px solid green");
    });

    $("#newUserId").on("input", function () {
        debugger;
        $("#spnnewuserId").html("");
        $("#newUserId").css("border", "1px solid green");
    });

    $("#newPassword").on("input", function () {
        debugger;
        $("#spnnewPassword").html("");
        $("#newPassword").css("border", "1px solid green");
    });


    $('#ForgotPassword').on('click', function () {
        debugger;
        $("#userid").val("");
        $("#OldPassword").val("");
        $('#NewPassowrdDive').hide();
        $('#LoginContainer').hide();
        $("#ForgotModel").removeClass('modal fade');
        $("#ForgotModel").addClass('modal fade show');
        //$("#modal-alert").add('aria-modal="true" ');
        $("#ForgotModel").show();
        //$("#myModalFinal").show();
     
    });

    $("#btnclose").click(function(){
        $("#ForgotModel").hide();
        $('#LoginContainer').show();
    });

    
    $("#btnforgot").click(function()
    {
        debugger;
        var email = $("#email").val();
        var UserId = $("#userid").val();
        //var pass = $("#OldPassword").val();


        if(email=="")
        {
            $("#EmailError").html("Enter Email Id");
            $("#email").css("border", "1px solid red");
            return false;
        }else{
            $("#EmailError").html("");
        }
        if(UserId=="")
        {
            $("#UserIdError").html("Enter User ID");
            $("#userid").css("border", "1px solid red");
            return false;
        }else{
            $("#UserIdError").html("");
        }
        //if(pass=="")
        //{
        //    $("#passwordError").html("Enter Password");
        //    $("#password").css("border", "1px solid red");
        //    return false;
        //}else{
        //    $("#passwordError").html("");
        //}

        $.ajax({
            url: '@Url.Action("CheckUserIsValid", "Home", new { area= "" })',
            method:"get",
            data:{email:email,UserId:UserId},
            success:function(response){
                debugger;
                var Message1 = response.Message;
                var Icon1 = response.Icon;
                if (response.Icon=="error") {
                    if (Message1 != null) {
                        if (Message1 != null) {
                                
                            Swal.fire({
                                title: '',
                                text: Message1,
                                icon: Icon1,
                                confirmButtonColor: '#3085d6',
                                confirmButtonText: 'Ok'
                            });                
                            return false;                            
                                                            
                        }
                    }
                }
                else{   
                    $("#ForgotmodelFirst").hide();  
                    $('#NewPassowrdDive').show();
                                     
                }
            }
        });
    });


    $("#btnUpdatePassword").click(function(){
        debugger;
        var email = $("#email").val();
        var newUserId = $("#newUserId").val();
        var newPassword = $("#newPassword").val();

        if(newUserId=="")
        {
            $("#spnnewuserId").html("Enter User Id");
            $("#newUserId").css("border", "1px solid red");
            return false;
        }else{
            $("#spnnewuserId").html("");
        }
        if(newPassword=="")
        {
            $("#spnnewPassword").html("Enter password");
            $("#newPassword").css("border", "1px solid red");
            return false;
        }else{
            $("#spnnewPassword").html("");
        }
        $.ajax({
            url: '@Url.Action("ForgotPassword", "Home", new { area= "" })',
            method:"get",
            data:{email:email,newUserId:newUserId,newPassword:newPassword},
            success:function(response){
                debugger;
                var Message1 = response.Message;
                var Icon1 = response.Icon;
                if (response.Icon!=null) {
                    if (Message1 != null) {       
                        Swal.fire({
                            title: '',
                            text: Message1,
                            icon: Icon1,
                            confirmButtonColor: '#3085d6',
                            confirmButtonText: 'Ok'
                        }).then((result) => {
                            if (result.isConfirmed) {
                                //.fade:not(.show)
                                $("#ForgotModel").hide();
                                $('#LoginContainer').show();
                                window.location.href = '@Url.Action("Login", "Home")';
                                console.log('User clicked confirm');
                            } else if (result.dismiss === Swal.DismissReason.cancel) {
                                // Handle when the user clicks cancel or closes the modal
                                console.log('User clicked cancel or closed the modal');
                            }
                        });
                            //Swal.fire({
                            //    title: '',
                            //    text: Message1,
                            //    icon: Icon1,
                            //    confirmButtonColor: '#3085d6',
                            //    confirmButtonText: 'Ok'
                            //});      
                            //$("#ForgotModel").hide();
                            //$('#LoginContainer').show();
                    }
                }             
            }
        });
    });
</script>